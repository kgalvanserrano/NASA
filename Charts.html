<!DOCTYPE html>
<html>

<head>
    <title>NASA Charts</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.js"></script>
</head>

<body>
    <div style= "height: 600px; width:600px" >
        <canvas id="myChart"></canvas>
    </div>
    <div style= "height: 600px; width:600px">
        <canvas id="myChart1"></canvas>
    </div>
    <script>
        const status_count = [0, 0, 0, 0, 0]
        const institution_count = [0, 0, 0, 0, 0, 0]
        fetch("http://127.0.0.1:5500/Missions.json")
            .then(response => {
                return response.json();
            })
            .then(jsondata => jsondata.forEach(datapoint => {
                if (datapoint.status === "Complete") {
                    status_count[0] += 1
                }else if (datapoint.status === "Implementation") {
                    status_count[1] += 1
                }else if (datapoint.status === "Operation") {
                    status_count[2] += 1
                }else if (datapoint.status === "Formulation") {
                    status_count[3] += 1
                }else if (datapoint.status === "Failure") {
                    status_count[4] += 1
                }
                if (datapoint.institution === "University") {
                    institution_count[0] +=1
                }else if (datapoint.institution === "NASA") {
                    institution_count[1] += 1
                }else if (datapoint.institution === "Industry") {
                    institution_count[2] += 1
                }else if (datapoint.institution === "UARC") {
                    institution_count[3] += 1
                }else if (datapoint.institution === "FFRDC") {
                    institution_count[4] += 1
                }else if (datapoint.institution === "NOAA") {
                    institution_count[5] += 1
                }
            }))
            .then(() => {
                const bar = document.getElementById('myChart').getContext('2d');
                const myChart = new Chart(bar, {
                    type: 'bar',
                    data: {
                        labels: ['Complete', 'Implementation', 'Operation', 'Formulation', 'Failure'],
                        datasets: [{
                            label: 'Count',
                            data: status_count
                        }]
                    },
                    options: {}
                });

                const nut = document.getElementById('myChart1').getContext('2d');
                const myChart1 = new Chart(nut, {
                    type: 'doughnut',
                    data:{
                        labels: ['University', 'NASA', 'Industry', 'UARC', 'FFRDC', 'NOAA'],
                        datasets: [{
                            label: 'Count',
                            data: institution_count
                        }]
                    },
                    options: {}
        });
            })
        console.log(status_count)
        console.log(institution_count)
    </script>
</body>
</html>